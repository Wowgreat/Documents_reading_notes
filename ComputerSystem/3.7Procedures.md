### 词汇

| English     | Chinese                      |
| ----------- | ---------------------------- |
| concise     | 简洁的                       |
| guise       | 伪装                         |
| entry       | 进入；条目                   |
| minimalist  | 极简主义                     |
| counterpart | 副本；配对物；极相似的人或物 |
| excerpt     | 摘选                         |

在不同的编程语言中，procedure由不同的名称——函数，方法，子例程，处理者（原文作 handler）等等

#### 程序调用的流程

假设在P中调用Q

- **传递控制**：PC（Program Counter ）在进入Q的时候需要被设置为Q的起始地址；在Q返回的时候，需要被设置为P中调用Q后面的那条指令的地址。
- **传递数据**
- **分配和解除分配内存**

#### 3.7.1 The Run-Time Stack

- ##### 程序调用机制的关键: 利用堆栈数据结构（stack data structure）的性质（即先进先出）

- **当一个x86-64过程需要超出它在寄存器中所能容纳的存储空间时，它会在堆栈上分配空间。**这段区域叫做 **程序的堆栈（原文作  stack frame， 下同）**

- **对于绝大多数程序来说，堆栈的大小是固定的**。且在程序开始时被分配

- **程序可以传递多达六个整数值（指针和整数）到被调用程序中，如果被调用者需要更多的参数，那么调用者就需要在调用之前将这些阐述保存在自己的堆栈里**

- **叶子程序** 不调用其他程序的程序叫叶子程序

#### 3.7.2 控制权传递

> 1、传递控制权(从程序**P**转移到程序**Q**)，仅仅需要将PC(Program Counter)设置为**Q**代码的起始地址。
>
> 2、稍后Q执行完毕返回的时候，处理器必须有一些这样的记录，记录程序**P**代码应该回复执行的位置。
>
> > 这些信息通过调用**Q**的指令**call Q**被记录下来。该地址是紧跟在call指令后面的指令的地址
>
> 3、call指令有一个目标，该目标指出被调用程序的开始地址。

**延申阅读：What is different in stack pointer, program counter and data pointer?**

> - **Stack Pointer（SP）**： 堆栈指针是一个寄存器，用来存储堆栈访问的最后一个程序的地址。
> - **Program Counter（PC）**： 程序计数器也是一个寄存器，用于保存当前程序下一步要执行的地址
> - **Data Pointer（DP）**：数据指针是用户可访问的2字节寄存器。它被用来指向数据。
> - ***总结：指针本质上是一个保存另一个变量或function地址的变量*** 

